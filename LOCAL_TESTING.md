# üè† –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
bip/
‚îú‚îÄ‚îÄ local-storage/
‚îÇ   ‚îú‚îÄ‚îÄ phones/              # üì± –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ accounts.txt     # –§–∞–π–ª —Å –Ω–æ–º–µ—Ä–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ sessions/            # üíæ Session JSON —Ñ–∞–π–ª—ã
‚îÇ       ‚îú‚îÄ‚îÄ session_12345.json
‚îÇ       ‚îî‚îÄ‚îÄ session_67890.json
‚îî‚îÄ‚îÄ ...
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–æ–º–µ—Ä–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `local-storage/phones/accounts.txt`:

```
+79001234567
+79001234568
+79001234569
```

### 2. –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏

```bash
# –ú–∞—Å—Å–æ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
python scripts/batch-get-sessions.py local-storage/phones/accounts.txt
```

–í—Å–µ —Å–µ—Å—Å–∏–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `local-storage/sessions/`

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏
python scripts/load-sessions-local.py list
```

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å session

```bash
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π session
python scripts/load-sessions-local.py test 12345
```

### 5. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Worker

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å docker-compose (–≤—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ)
docker-compose up -d

# Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–∏ –∏–∑ local-storage/sessions/
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ session:

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞** (`local-storage/sessions/`) - **–ü–†–ò–û–†–ò–¢–ï–¢**
2. S3/MinIO (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
3. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `.session` (fallback)

### Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- –ò—â–µ—Ç session –≤ `local-storage/sessions/session_<account_id>.json`
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ
- –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–±—É–µ—Ç S3
- –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π

## üìÅ –§–æ—Ä–º–∞—Ç session —Ñ–∞–π–ª–∞

```json
{
  "account_id": "12345",
  "phone_number": "+79001234567",
  "username": "username",
  "first_name": "–ò–º—è",
  "last_name": "–§–∞–º–∏–ª–∏—è",
  "session_string": "1BVtsOMwBu5...",
  "api_id": "30348172",
  "api_hash": "84b70fca6408500690aa026beb1982b3"
}
```

## üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# Worker –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏ –∏–∑ local-storage/sessions/
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Python

```python
from scripts.load_sessions_local import load_session_local
from telethon import TelegramClient
from telethon.sessions import StringSession

# –ó–∞–≥—Ä—É–∑–∏—Ç—å session
session_data = load_session_local("12345")

# –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç
client = TelegramClient(
    StringSession(session_data['session_string']),
    int(session_data['api_id']),
    session_data['api_hash']
)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
await client.start()
me = await client.get_me()
print(f"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: {me.first_name}")
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç S3 –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–µ–≥–∫–æ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã
- ‚úÖ –ú–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ü–∞–ø–∫–∞ `local-storage/` —É–∂–µ –≤ `.gitignore`
- Session —Ñ–∞–π–ª—ã –Ω–µ –±—É–¥—É—Ç –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- –•—Ä–∞–Ω–∏—Ç–µ –ø–∞–ø–∫—É –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –Ω–æ–º–µ—Ä–∞–º–∏
echo "+79001234567" > local-storage/phones/accounts.txt
echo "+79001234568" >> local-storage/phones/accounts.txt

# 2. –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏
python scripts/batch-get-sessions.py local-storage/phones/accounts.txt

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
python scripts/load-sessions-local.py list
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ S3 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```bash
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π, –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ S3
python scripts/batch-upload-sessions.py
```

## üéØ –ò—Ç–æ–≥

1. ‚úÖ –ù–æ–º–µ—Ä–∞ –≤ `local-storage/phones/`
2. ‚úÖ –°–µ—Å—Å–∏–∏ –≤ `local-storage/sessions/`
3. ‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
4. ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ S3
5. ‚úÖ Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏

